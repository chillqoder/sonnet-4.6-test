# MovieSwipe — Technical Specification (MVP)

**Note:** This document is written in English for developers/API coders and AI coding tools. The application UI itself must be in Russian language.

**Summary:** MovieSwipe is a Flutter mobile application for discovering movies based on mood and fast selection using swipe interactions. The app is offline-first and uses a dark theme (dark grey background). Movie data is stored locally in a JSON file inside assets.

---

## 1. Product Goals and Audience

- **Main goal:** Help users quickly choose a movie based on mood or by swiping through recommendations.
- **Target audience:** 18–40 years old movie lovers who want fast decisions and simple interaction.

---

## 2. Platform

- **Framework:** Flutter
- **Targets:** Android and iOS
- **Minimum:** Flutter 3.x+, null-safety enabled

---

## 3. UI / UX — Navigation Structure

Tabbed application (4 tabs):

1. **Main (Swipe)** — default screen
   - Stack of movie cards.
   - Card shows poster, title, rating, duration, short description.
   - Gestures:
     - Swipe right = like / add to favorites
     - Swipe left = skip
     - Tap = open movie details
   - Buttons: Like, Dislike, Undo.

2. **Mood (By Mood)**
   - User selects mood tags (example: romantic, funny, thrilling, calm, sad, nostalgic, adventurous, intellectual, scifi, horror).
   - Press "Select movie" → random movie filtered by selected moods.

3. **Favorites**
   - List/grid of saved movies.
   - Sorting and removal options.

4. **Profile / Settings**
   - App settings
   - Language (UI must be Russian)
   - Theme options (dark by default)

Additional screens:

- **Catalog / Search**
  - Scrollable list of all movies.
  - Search input.
  - Filters: genre, rating, duration, mood.

- **Movie Details**
  - Full description
  - Poster
  - Metadata (cast, director, etc.)
  - Add/remove favorite

---

## 4. Visual Style (Dark Theme)

- Background: dark grey (#111219 or similar)
- Cards/surfaces: slightly lighter dark grey (#15171A)
- Primary text: #E6E7EB
- Secondary text: #A6A8AD
- Accent color (Supabase-like green): e.g. #2ECC71
- Error color: #FF6B6B

Typography:
- System fonts (SF / Roboto)
- Semi-bold titles

Animations:
- Smooth swipe animations
- Visual feedback on like/dislike

---

## 5. Data Source — Local JSON File

Movie data is stored locally.

Location:

```
assets/movies.json
```

The file is provided externally (NOT generated by the application). The application must load and parse this file.

Each movie object structure:

```json
{
  "id": "string",
  "title": "string",
  "original_title": "string | null",
  "year": 2020,
  "description": "string",
  "genres": ["drama", "comedy"],
  "moods": ["funny", "romantic"],
  "rating": 7.8,
  "duration": 125,
  "director": "string",
  "cast": ["Actor A", "Actor B"],
  "poster": "assets/images/poster_001.jpg",
  "backdrop": "assets/images/backdrop_001.jpg",
  "language": "ru",
  "tags": ["tag1", "tag2"],
  "watch_status": "unwatched",
  "is_favorite": false,
  "tmdb_id": null,
  "created_at": "2025-02-01T12:00:00Z"
}
```

Notes:
- JSON file is read-only base data.
- User-specific changes (favorites, status) should be stored locally (Hive or similar storage).

---

## 6. Architecture and Recommended Stack

Architecture layers:

- Presentation — Flutter UI widgets
- Domain — models and filtering logic
- Data — JSON loader and local storage

Recommended packages:

- flutter_riverpod (state management)
- hive + hive_flutter (local persistence)
- path_provider
- flutter_staggered_grid_view
- swipe_cards or similar swipe library
- intl (localization helpers)

---

## 7. Recommendation and Filtering Logic

Main Swipe:
- Movies loaded and shuffled randomly.
- Each swipe removes item from stack.

Mood selection:
- User selects one or more moods.
- Filter movies containing selected moods.
- Return random item or subset.

Catalog Search:
- Search fields: title, original_title, cast, director, tags.
- Filters: genre, rating, duration.

Undo:
- Restore last swipe action.

---

## 8. Local API (Repository Interface)

Example file:

```
lib/data/movie_repository.dart
```

Methods (conceptual):

```dart
class MovieRepository {
  Future<void> init();
  Future<List<Movie>> loadAll();
  Future<Movie?> getById(String id);
  Future<List<Movie>> getRandomStack({int count = 20});
  Future<Movie?> getRandomByMood(List<String> moods);
  Future<List<Movie>> search(String query);
  Future<void> toggleFavorite(String id);
  Future<List<Movie>> getFavorites();
  Future<void> updateMovie(Movie m);
}
```

Model example:

```dart
class Movie {
  final String id;
  final String title;
  final int year;
  final String description;
  final List<String> genres;
  final List<String> moods;
  final double rating;
  final int duration;
  final String poster;
  bool isFavorite;
}
```

---

## 9. Swipe UX Details

- Show 3 cards in stack.
- Right swipe → like animation + add to favorites.
- Left swipe → skip animation.
- Undo button restores last card.
- Icons highlight during swipe direction.

---

## 10. Storage and Data Handling

- MVP is fully offline.
- Base movie list from assets JSON.
- User data stored locally.

---

## 11. Testing

- Unit tests for repository and filtering logic.
- Widget tests for main screens.

---

## 12. UI Components (Examples)

- MovieCard
- MoodChip
- CatalogItem
- MovieDetailsScreen

---

## 13. Notes

- Application UI language must be Russian.
- Developer specification and documentation remain in English.

---

*End of specification.*

